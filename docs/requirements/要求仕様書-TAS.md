# タイマー・アラーム・ストップウォッチ　要求仕様書

## 1.はじめに

- 作成者: 三嶋、村岡、野村
- 文書の目的： 本3機能に関して、要求事項を開発者・試験者の間で認識をすり合わせるため
- 対象範囲： Webブラウザ（Google Chrome, Safari, Microsoft Edge 等）
- 想定利用者： 業務従事者

## 2.共通仕様

### 2.1 概要

以下に示す機能とデザインを持つアプリを作成する。
本アプリは、ブラウザ上で動作し、
**タイマー**
**アラーム**
**ストップウォッチ**
各々の機能に切り替えて実行できる。

1. **タイマー機能**はブラウザ上で動作し、ユーザーが設定した時間でカウントダウンを実行する。また、指定時間に達した際、ユーザーへ通知を行う

2. **アラーム機能**はブラウザ上で動作し、5つまでアラームを記憶でき、24時間表記で、時間と分の単位でアラームが設定できる

3. **ストップウォッチ機能**はブラウザ上で動作し、経過時間の計測、一時停止・再開、ラップタイムの記録が可能である

### 2.2 対象環境

-  使用言語: TypeScript, HTML, CSS
-  使用ツール: Vite,VSCode,Jest, Figma, PlantUML, GitHub, Googleスプレッドシート
-  動作環境: GoogleChrome最新版, MicrosoftEdge最新版, vercel

## 3. 目的

### 3.1 システムの目的

#### 1. タイマー

- ユーザーが時間を気にすることなく、集中して作業が出来ること

- ユーザーが画面を見続ける負担を無くし、時間管理をサポートすること

#### 2. アラーム

- タスク管理や業務効率化において、ユーザーの時間配分を正確かつ効率的に管理するアラーム機能を提供する

- アラームにより、開始時と終了時を設定し仕組み化する事で、ユーザーのタスクにおける集中度や推移率の向上を図る

- ユーザーの業務におけるタスク増加の解決策を、時間設定による細分化という構造で解決する

- ユーザーの時間管理負荷自体を削減し、ストレス低減や働き方改革を提供する

- タスク効率化により、業務成績向上や心理的満足度を見込む

#### 3. ストップウォッチ

- 正確な時間計測を提供すること
  - ユーザーが開始・停止・ラップ・リセット操作を容易に行い、正確な経過時間を計測・表示できる

- ラップタイムの管理と表示
  - ユーザーが任意の時点でラップを取り、複数のタイム記録を蓄積し管理できること

### 3.2 各機能の目的

#### 1. タイマー

| 機能        | 目的      |
| ---------- | --------- |
| 時間設定機能 | ユーザーがタイマーでカウントダウンしたい時間を、直感的かつ誤りなく設定できるようにすること                                         |
| 開始機能     | ユーザーが設定した時間を基に、意図したタイミングですぐにカウントダウンを開始し残り時間を正確に把握できるようにすること                 |
| 一時停止機能 | カウントダウンの途中でユーザーが必要に応じてタイマーを一時停止し、残り時間を保持したまま後から再開できるようにすること　　　　　         |
| リセット機能 | カウントダウンの途中または終了後であっても、ユーザーがタイマーの状態を初期化し、開始前に設定した時間に戻して再利用できるようにすること    |
| 終了通知機能 | タイマーの設定時間が経過したことを音および画面表示によってユーザーに知らせ、タイマー終了を見逃さないようにすること                     |
| 表示機能     | タイマーの現在の状態や残り時間を分かりやすい形式で画面に表示し、ユーザーが経過状況を直感的に把握できるようにすること                   |
| エラー処理   | 開始できない設定状態でタイマーが動作することを防ぎ、エラー内容を画面に表示することで意図しない動作や誤った操作を防止すること            |

#### 2. アラーム

| 機能         | 目的        |
| ------------ | ---------- |
| アラーム追加 | ユーザーがタスク終了までの時間を設定できるようにすること         |
| アラーム記録 | 過剰なアラーム設定数を制限し、有効的に本機能を使用すること       |
| アラーム切替 | アラームを使用するかどうかをユーザーの状況に応じて対応すること    |
| アラーム削除 | 不要なアラームを削除する事で、効率的に本機能を使用すること       |
| アラーム鳴動 | 音で鳴らす事で聴覚情報によるユーザーのタスク管理・支援をすること  |
| アラーム鳴止 | 音を止めるタイミングを決める事でタスクの良い切替を促すこと       |

#### 3. ストップウォッチ

| 機能 | 目的 |
|-----|-----|
| 計測開始・停止（スタート／一時停止） | 計測を開始・一時停止することで、必要な時間区間の正確な計測を可能にすること   |
| ラップ記録    | 任意のタイミングでラップを記録し、途中経過を把握、比較、管理できるようにすること                 |
| リセット      | 計測結果やラップ履歴をクリアし、初期状態に戻すことで、新しい計測を準備できるようにすること        |
| 経過時間表示  | 計測中の時間をリアルタイムに分かりやすく表示し、ユーザーへ即時の情報提供を行うこと                |
| ラップ履歴表示 | 記録したラップタイムを一覧表示し、各ラップの時間や合計時間が分かるようにすること                 |

## 4. 用語集

#### 1. タイマー

- 実時間：現実の時計で進む時間のこと
- 保持：カウントダウン中の残り時間を変えずに維持することを指す

#### 2. アラーム

- リポジトリ：ソースコードやファイル・フォルダの変更履歴を保存・管理する倉庫のような場所
- ローカルストレージ：使用者が使用しているデバイス(iphoneなど)にデータを保存する領域の事
- 保守性：システムやコードが変更・修正・維持しやすい性質
- 拡張性：機能追加や性能向上が容易にできる性質

## 5. 画面仕様　

### 5.1 表示要素

#### 1. タイマー

-  時間選択エリア（時間:分:秒）

-  残り時間表示エリア

-  開始ボタン

-  一時停止ボタン

-  再開ボタン

-  リセットボタン

-  停止ボタン(終了音が鳴っている時のみ表示)

#### 2. アラーム

- TOP画面

- 追加ボタン(+)

- 選択ボタン

- 停止ボタン

- 保存ボタン

- 削除ボタン

- キャンセルボタン

- チェックボタン

- ON・OFF切替ボタン

- アラーム追加後の１行(リスト形式)

#### 3. ストップウォッチ

-  経過時間表示エリア(時間:分:秒.ミリ秒)の形式で表示する

- スタート/一時停止ボタン

- ラップボタン

- リセットボタン

- ラップ履歴表示エリア

### 5.2 初期状態

#### 1. タイマー

-  タイマーの表示: 00:00:00 

-  カウントダウンは開始されていない状態とする

#### 2. アラーム

- タイトル名「アラーム」

- 追加ボタン： 表示状態

- 選択ボタン： 非表示状態

- 初期アラームなどは設定されていない状態とする

#### 3. ストップウォッチ

- 経過時間表示:　00:00:00.00

- スタート/一時停止ボタン: 有効化状態(※ボタンデザインは4人で相談後確定させる)

- ラップボタン: 無効化状態

- リセットボタン: 無効化状態

- ラップ履歴エリア: 非表示状態

### 5.3 デザイン

- 操作が直感的に理解できるシンプルな画面構成とする。
- ボタンはクリックしやすい十分な大きさ、配置とする。
- 押下不可の操作は、視覚的に無効であることが分かる表現とする。
- 画面構成および操作配置は、画面仕様書に準拠する。

## 6. 機能仕様

### 6.1 タイマー機能

#### 1. 時間設定機能

-  ユーザーは**時間**と**分**と**秒**をそれぞれ選択して設定出来る

-  設定できる範囲は、**時間0〜23**、**分0〜59**、**秒0〜59**

-  最大設定時間は**23:59:59**

- 　**5つ**までタイマーを設定できる(Webブラウザを閉じると削除される)

#### 2. 開始機能

-  開始ボタン押下後、設定した時間を画面に表示し、**1秒**ごとに残り時間を減少させる

-  ページを再読み込みした場合、設定した時間やカウントダウンの進行状況はすべてリセットされる

#### 3. 一時停止機能

-  一時停止ボタン押下後、押下した時点での残り時間を保持し、カウントダウンを停止する

-  再開ボタン押下後、一時停止時に保持した残り時間からカウントダウンを再開する

-  カウントダウン中は、一時停止操作が行われない限り継続して動作する

-  一時停止→再開の操作後も、表示される残り時間は一時停止時点と一致する

#### 4. リセット機能(キャンセル)

-  カウントダウン中または一時停止中にリセットボタンを押下することで、タイマーをキャンセルしたものとして扱う

-  キャンセル時は、カウントダウンを中断し設定していた時間に戻る

-  タイマー終了後（00:00:00表示時）にリセットボタンを押した場合も、設定していた時間に戻る

-  終了音が鳴っている場合、リセットボタン押下と同時に停止する

-  リセットボタンは、時間が設定されている場合のみ押下出来る

#### 5. 終了通知機能

-  タイマーの残り時間が**0**になると、終了音を再生し画面には「**00:00:00**」を表示する

-  終了後は、ユーザーに終了を知らせるメッセージ（例:「タイマーが終了しました」）を画面に表示する

-  終了音は「停止」ボタンを押すまで再生され続ける

-  タイマーで設定した時間が経過すると、停止ボタンまたはリセットボタンを押すまで音が鳴り続ける。ただし、停止ボタンまたはリセットボタンが30秒以内に押されない場合、自動的に終了音を停止する

-  端末の音量が0またはスリープ状態の場合、音は鳴らない 

-  機内モード時(Wi-FiやBluetoothのoff時)または画面最小化時の場合でも、音は鳴ること

#### 6. 表示機能

-  残り時間は画面上に表示し、「**時間・分・秒（hh:mm:ss）**」形式で表す

-  カウントダウン中は、**1秒**ごとに残り時間を更新して表示する

-  一時停止中は、一時停止した時点の残り時間を表示し続ける

-  残り時間が**0**になった場合は「**00:00:00**」を表示する

#### 7. エラー処理

-  タイマーとして開始できない設定（例：設定時間が0秒）が入力されている場合、エラーとして扱う

-  エラー発生時は、画面に「エラー」と表示し、カウントダウンは行わない

-  エラー表示中は、タイマーは開始されず時間設定をやり直すまで操作できない
  
### 6.2 アラーム機能

#### 1. 追加機能

- 24時間表記で、**時間 0〜23**と**分 00〜59**の単位でアラームが設定できる

- **サウンド**機能を設定できる

- **サウンド**の音源はフリー素材を使用する(カスタム音源不可)。また、サンプル音源をリスト表示し、クリックで音源確認可能にする

- 設定したアラームはTOP画面に１行で表示される

- アラームを追加後の初期状態はアラームがONの状態で反映される

#### 2. 切替機能

- 記録したアラームのON・OFFを切り替えられる

#### 3. 停止機能

- 設定時刻になり鳴ったアラームは停止できる

#### 4. 削除機能

- 設定されたアラームは各々また一括で削除できる

#### 5. 記録機能

- **5つ**までアラームを記憶できる（記憶したアラームはWebブラウザを閉じても保存される）⇒ **ローカルストレージ**を利用

#### 6. 通知機能

- ON設定のアラームは、設定時刻になると音を鳴らす

- 端末の音量が0またはスリープ状態の場合、音は鳴らない

- 機内モード時(Wi-FiやBluetoothのoff時)または画面最小化時の場合でも、音は鳴ること

#### 7. エラー処理

- 電源切断(バッテリー切れ)は端末依存なのでエラーと想定しない

- 最大鳴動時間は設定していないのでユーザーがアラームを停止すること


### 6.3 ストップウォッチ機能

#### 6.3.1 計測機能

##### 1.　計測開始(スタート)

- 初期状態でスタート／一時停止ボタンを押下すると、計測を開始する

- 計測開始と同時にラップボタンが有効化する

##### 2.　計測停止(一時停止)

- 計測中にスタート／一時停止ボタンを押下すると計測を一時停止する

- 一時停止中、ラップボタンは無効化状態に遷移する

- 一時停止中、リセットボタンは有効化状態に遷移する

##### 3.　計測再開　

- 一時停止中にスタート／一時停止ボタンを押下すると計測を再開する

- 計測再開時、一時停止時点からの経過時間を継続して計測する

#### 6.3.2 ラップ機能

##### 1.　ラップ記録

- 計測中にラップボタンを押下すると、押下時点の経過時間が記録される

- 計測中にラップボタンを押下すると、画面下部にラップ履歴を表示する

##### 2.　ラップ履歴エリア

- ラップボタンが押下されると、降順にラップ履歴が表示される

- ラップ履歴表示部分には**ラップ****時間****合計**が表示される

- **ラップ**部分はラップボタンが押下される度に、1,2,3,4…と連番で表示される

- 5つまで**ラップ**部分を設定できる(Webブラウザを閉じると削除される)

- **時間**部分は直前のラップ(または開始時点)からの経過時間を表示する

- **合計**部分は計測中にリセットボタンが押下されるまでの累積時間を表示する

#### 6.3.3 リセット機能

- 計測中(または一時停止中)にリセットボタンを押下すると以下の処理を実行する

  -  経過時間表示を初期状態(00:00:00.00)にリセットする

  -  ラップ履歴をクリアする

  -  ラップ履歴エリアを非表示にする

  -  画面を初期状態に戻す

#### 6.3.4 エラー処理

- 本アプリはシンプルな機能のため、致命的なエラーは想定されないが、以下の例外的動作を考慮する

  - 【多重押下制御】  
    スタート／一時停止ボタン、ラップボタンは連続押下を防止し、状態遷移の整合性を保つ。  
    ボタン押下後200msは再押下を受け付けない

  - 【最大計測時間超過】  
    計測時間が99時間59分59秒99を超えた場合、計測を自動停止し、ユーザーに通知する

  - 【非活性ボタンの操作】  
    無効化状態のボタン押下は操作として無効とし、何も反応しない

#### 6.3.5 時間表示形式

- 表示形式: HH:MM:SS.mm
  -　HH: 時間(00〜99)
  -　MM: 分(00〜59)
  -　SS: 秒(00〜59)
  -　mm: ミリ秒の上2桁(00〜99)

## 7. 制約事項

#### 1. タイマー

- 本アプリでは、同時に複数のタイマーを動作させることはできない

#### 2. アラーム

- 単位は**時間**と**分**のみ、**秒**単位以下は不可とする

- 本アプリでは、同時に複数のアラームを鳴らすことはできない(最新の一つのみ鳴る)

#### 3. ストップウォッチ

‐　計測時間の上限は**99時間59分59秒99**とする

‐　ラップ履歴は画面を再読み込みすると削除される(永続化しない)

## 8. 非機能要件

#### 1. 共通項目

- 可用性  
  - ブラウザタブを閉じない限り動作を継続できること

- 運用・保守
  - ソースコードはTypeScriptにて記述すること
  - 保守性・拡張性の高いコードを記載すること
  - コメントの適切利用と定期的にコードレビューを行い、チーム開発を意識すること
  - メンバーがアクセス可能なリポジトリを使用し、チーム開発を意識すること

- セキュリティ  
  - 本アプリはローカル動作かつ個人情報を扱わないため、特別なセキュリティ要件なし

- 動作環境安定性  
  - Google Chrome 最新版および Microsoft Edge 最新版で動作確認済みであること

- 互換性
  -  現行主要ブラウザの最新バージョンに対応し、モバイル環境は対象外とする

#### 2. タイマー

- パフォーマンス
  -  開始ボタン押下後、300ms以内にカウントダウンを開始する
  -  カウントダウンは実時間に対して1秒以内の誤差で進行する

#### 3. アラーム

- パフォーマンス
  - アラーム起動時の通信遅延や処理時間の通信遅延はユーザーのインターネット環境依存とする

#### 4. ストップウォッチ

- パフォーマンス
  - 経過時間表示は遅延なくリアルタイムで更新されること。表示遅延は100ms以下とする

- ユーザビリティ  
  - ボタンの状態（有効化/無効化）は視覚的に明確に区別可能であること

## 9. 参考

#### 1. タイマー

- 本タイマー仕様は、iphoneとMacBook標準搭載の『時計』アプリ内『タイマー』機能を参考に作成

#### 2. アラーム

- 本アラーム仕様は、iphoneとMacBook標準搭載の『時計』アプリ内『アラーム』機能を参考に作成

#### 3. ストップウォッチ

- 本ストップウォッチ仕様は、Windows標準搭載の『クロック』アプリ内『ストップウォッチ』機能を参考に作成